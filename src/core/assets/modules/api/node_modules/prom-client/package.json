{
  "_args": [
    [
      {
        "raw": "prom-client@^10.2.2",
        "scope": null,
        "escapedName": "prom-client",
        "name": "prom-client",
        "rawSpec": "^10.2.2",
        "spec": ">=10.2.2 <11.0.0",
        "type": "range"
      },
      "/Users/vt/Desktop/projects/newv1/node_modules/swagger-stats"
    ]
  ],
  "_from": "prom-client@>=10.2.2 <11.0.0",
  "_id": "prom-client@10.2.3",
  "_inCache": true,
  "_location": "/prom-client",
  "_nodeVersion": "8.3.0",
  "_npmOperationalInternal": {
    "host": "s3://npm-registry-packages",
    "tmp": "tmp/prom-client_10.2.3_1519813568200_0.3882755618895992"
  },
  "_npmUser": {
    "name": "siimon",
    "email": "simon@nyberg.io"
  },
  "_npmVersion": "5.3.0",
  "_phantomChildren": {},
  "_requested": {
    "raw": "prom-client@^10.2.2",
    "scope": null,
    "escapedName": "prom-client",
    "name": "prom-client",
    "rawSpec": "^10.2.2",
    "spec": ">=10.2.2 <11.0.0",
    "type": "range"
  },
  "_requiredBy": [
    "/swagger-stats"
  ],
  "_resolved": "https://registry.npmjs.org/prom-client/-/prom-client-10.2.3.tgz",
  "_shasum": "a51bf21c239c954a6c5be4b1361fdd380218bb41",
  "_shrinkwrap": null,
  "_spec": "prom-client@^10.2.2",
  "_where": "/Users/vt/Desktop/projects/newv1/node_modules/swagger-stats",
  "author": {
    "name": "Simon Nyberg"
  },
  "bugs": {
    "url": "https://github.com/siimon/prom-client/issues"
  },
  "dependencies": {
    "tdigest": "^0.1.1"
  },
  "description": "Client for prometheus",
  "devDependencies": {
    "eslint": "^4.1.1",
    "eslint-plugin-prettier": "^2.1.2",
    "express": "^4.13.3",
    "husky": "^0.14.3",
    "jest": "^21.2.1",
    "lint-staged": "^5.0.0",
    "lolex": "^2.1.3",
    "prettier": "1.8.2",
    "typescript": "^2.5.2"
  },
  "directories": {},
  "dist": {
    "integrity": "sha512-Xboq5+TdUwuQtSSDRZRNnb5NprINlgQN999VqUjZxnLKydUNLeIPx6Eiahg6oJua3XBg2TGnh5Cth1s4I6+r7g==",
    "shasum": "a51bf21c239c954a6c5be4b1361fdd380218bb41",
    "tarball": "https://registry.npmjs.org/prom-client/-/prom-client-10.2.3.tgz",
    "fileCount": 31,
    "unpackedSize": 102961
  },
  "engines": {
    "node": ">=4"
  },
  "files": [
    "lib/",
    "index.js",
    "index.d.ts"
  ],
  "gitHead": "b429d1d4450f75c7b31dc02aafbb4fce5e648628",
  "homepage": "https://github.com/siimon/prom-client",
  "jest": {
    "testEnvironment": "node",
    "testRegex": ".*Test\\.js$"
  },
  "keywords": [
    "Prometheus",
    "Metrics",
    "Client"
  ],
  "license": "Apache-2.0",
  "lint-staged": {
    "*.js": [
      "eslint --fix",
      "git add"
    ],
    "*.{ts,md,json}": [
      "prettier --write",
      "git add"
    ],
    ".eslintrc": [
      "prettier --write",
      "git add"
    ]
  },
  "main": "index.js",
  "maintainers": [
    {
      "name": "siimon",
      "email": "simon@nyberg.io"
    },
    {
      "name": "simenb",
      "email": "sbekkhus91@gmail.com"
    }
  ],
  "name": "prom-client",
  "optionalDependencies": {},
  "prettier": {
    "singleQuote": true,
    "useTabs": true,
    "overrides": [
      {
        "files": "*.md",
        "options": {
          "useTabs": false
        }
      },
      {
        "files": ".eslintrc",
        "options": {
          "parser": "json"
        }
      }
    ]
  },
  "readme": "# Prometheus client for node.js [![Build Status](https://travis-ci.org/siimon/prom-client.svg?branch=master)](https://travis-ci.org/siimon/prom-client) [![Build status](https://ci.appveyor.com/api/projects/status/k2e0gwonkcee3lp9/branch/master?svg=true)](https://ci.appveyor.com/project/siimon/prom-client/branch/master)\n\nA prometheus client for node.js that supports histogram, summaries, gauges and\ncounters.\n\n### Usage\n\nSee example folder for a sample usage. The library does not bundle any web\nframework, to expose the metrics just return the `metrics()` function in the\nregistry.\n\n#### Usage with Node.js's `cluster` module\n\nNode.js's `cluster` module spawns multiple processes and hands off socket\nconnections to those workers. Returning metrics from a worker's local registry\nwill only reveal that individual worker's metrics, which is generally\nundesirable. To solve this, you can aggregate all of the workers' metrics in the\nmaster process. See `example/cluster.js` for an example.\n\nDefault metrics use sensible aggregation methods. Custom metrics are summed\nacross workers by default. To use a different aggregation method, set the\n`aggregator` property in the metric config to one of 'sum', 'first', 'min',\n'max', 'average' or 'omit'. (See `lib/metrics/version.js` for an example.)\n\nIf you need to expose metrics about an individual worker, you can include a\nvalue that is unique to the worker (such as the worker ID or process ID) in a\nlabel. (See `example/server.js` for an example using\n`worker_${cluster.worker.id}` as a label value.)\n\nMetrics are aggregated from the global registry by default. To use a different\nregistry, call\n`client.AggregatorRegistry.setRegistries(registryOrArrayOfRegistries)` from the\nworker processes.\n\n### API\n\n#### Configuration\n\nAll metric types has 2 mandatory parameters, name and help.\n\n#### Default metrics\n\nThere are some default metrics recommended by Prometheus\n[itself](https://prometheus.io/docs/instrumenting/writing_clientlibs/#standard-and-runtime-collectors).\nTo collect these, call `collectDefaultMetrics`\n\nNOTE: Some of the metrics, concerning File Descriptors and Memory, are only\navailable on Linux.\n\nIn addition, some Node-specific metrics are included, such as event loop lag,\nactive handles and Node.js version. See what metrics there are in\n[lib/metrics](lib/metrics).\n\n`collectDefaultMetrics` takes 1 options object with 2 entries, a timeout for how\noften the probe should be fired and a registry to which metrics should be\nregistered. By default probes are launched every 10 seconds, but this can be\nmodified like this:\n\n```js\nconst client = require('prom-client');\n\nconst collectDefaultMetrics = client.collectDefaultMetrics;\n\n// Probe every 5th second.\ncollectDefaultMetrics({ timeout: 5000 });\n```\n\nTo register metrics to another registry, pass it in as `register`:\n\n```js\nconst client = require('prom-client');\n\nconst collectDefaultMetrics = client.collectDefaultMetrics;\nconst Registry = client.Registry;\nconst register = new Registry();\n\ncollectDefaultMetrics({ register });\n```\n\nYou can get the full list of metrics by inspecting\n`client.collectDefaultMetrics.metricsList`.\n\n`collectDefaultMetrics` returns an identification when invoked, which is a\nreference to the `Timer` used to keep the probes going. This can be passed to\n`clearInterval` in order to stop all probes.\n\nNOTE: Existing intervals are automatically cleared when calling\n`collectDefaultMetrics`.\n\n```js\nconst client = require('prom-client');\n\nconst collectDefaultMetrics = client.collectDefaultMetrics;\n\nconst interval = collectDefaultMetrics();\n\n// ... some time later\n\nclearInterval(interval);\n```\n\nNOTE: `unref` is called on the `interval` internally, so it will not keep your\nnode process going indefinitely if it's the only thing keeping it from shutting\ndown.\n\n##### Stop polling default metrics\n\nTo stop collecting the default metrics, you have to call the function and pass\nit to `clearInterval`.\n\n```js\nconst client = require('prom-client');\n\nclearInterval(client.collectDefaultMetrics());\n\n// Clear the register\nclient.register.clear();\n```\n\n#### Counter\n\nCounters go up, and reset when the process restarts.\n\n```js\nconst client = require('prom-client');\nconst counter = new client.Counter({\n  name: 'metric_name',\n  help: 'metric_help'\n});\ncounter.inc(); // Inc with 1\ncounter.inc(10); // Inc with 10\n```\n\nA counter can be reset manually. This removes the label-values combinations and\ninitializes to 0.\n\n```js\ncounter.reset();\ncounter.inc(); // Inc with 1 starting from 0\n```\n\n#### Gauge\n\nGauges are similar to Counters but Gauges value can be decreased.\n\n```js\nconst client = require('prom-client');\nconst gauge = new client.Gauge({ name: 'metric_name', help: 'metric_help' });\ngauge.set(10); // Set to 10\ngauge.inc(); // Inc with 1\ngauge.inc(10); // Inc with 10\ngauge.dec(); // Dec with 1\ngauge.dec(10); // Dec with 10\n```\n\nA gauge can be reset manually. This removes the label-values combinations and\ninitializes to 0.\n\n```js\ngauge.reset();\ngauge.inc(); // Inc with 1 starting from 0\n```\n\nThere are some utilities for common use cases:\n\n```js\ngauge.setToCurrentTime(); // Sets value to current time\n\nconst end = gauge.startTimer();\nxhrRequest(function(err, res) {\n  end(); // Sets value to xhrRequests duration in seconds\n});\n```\n\n#### Histogram\n\nHistograms track sizes and frequency of events.\n\n**Configuration**\n\nThe defaults buckets are intended to cover usual web/rpc requests, this can\nhowever be overriden.\n\n```js\nconst client = require('prom-client');\nnew client.Histogram({\n  name: 'metric_name',\n  help: 'metric_help',\n  buckets: [0.1, 5, 15, 50, 100, 500]\n});\n```\n\nYou can include all label names as a property as well.\n\n```js\nconst client = require('prom-client');\nnew client.Histogram({\n  name: 'metric_name',\n  help: 'metric_help',\n  labelNames: ['status_code'],\n  buckets: [0.1, 5, 15, 50, 100, 500]\n});\n```\n\nExamples\n\n```js\nconst client = require('prom-client');\nconst histogram = new client.Histogram({\n  name: 'metric_name',\n  help: 'metric_help'\n});\nhistogram.observe(10); // Observe value in histogram\n```\n\nUtility to observe request durations\n\n```js\nconst end = histogram.startTimer();\nxhrRequest(function(err, res) {\n  end(); // Observes the value to xhrRequests duration in seconds\n});\n```\n\nA Histogram can be reset manually. This removes the label-values combinations\nand reinitializes the observations.\n\n```js\nhistogram.reset();\n```\n\n#### Summary\n\nSummaries calculate percentiles of observed values.\n\n**Configuration**\n\nThe default percentiles are: 0.01, 0.05, 0.5, 0.9, 0.95, 0.99, 0.999. But they\ncan be overriden like this:\n\n```js\nconst client = require('prom-client');\nnew client.Summary({\n  name: 'metric_name',\n  help: 'metric_help',\n  percentiles: [0.01, 0.1, 0.9, 0.99]\n});\n```\n\nUsage example\n\n```js\nconst client = require('prom-client');\nconst summary = new client.Summary({\n  name: 'metric_name',\n  help: 'metric_help'\n});\nsummary.observe(10);\n```\n\nUtility to observe request durations\n\n```js\nconst end = summary.startTimer();\nxhrRequest(function(err, res) {\n  end(); // Observes the value to xhrRequests duration in seconds\n});\n```\n\nA Summary can be reset manually. This removes the label-values combinations and\nreinitializes the observations.\n\n```js\nsummary.reset();\n```\n\n#### Labels\n\nAll metrics can take a labelNames property in the configuration object. All\nlabelNames that the metric support needs to be declared here. There are 2 ways\nto add values to the labels\n\n```js\nconst client = require('prom-client');\nconst gauge = new client.Gauge({\n  name: 'metric_name',\n  help: 'metric_help',\n  labelNames: ['method', 'statusCode']\n});\n\ngauge.set({ method: 'GET', statusCode: '200' }, 100); // 1st version, Set value 100 with method set to GET and statusCode to 200\ngauge.labels('GET', '200').set(100); // 2nd version, Same as above\n```\n\nIt is also possible to use timers with labels, both before and after the timer\nis created:\n\n```js\nconst end = startTimer({ method: 'GET' }); // Set method to GET, we don't know statusCode yet\nxhrRequest(function(err, res) {\n  if (err) {\n    end({ statusCode: '500' }); // Sets value to xhrRequest duration in seconds with statusCode 500\n  } else {\n    end({ statusCode: '200' }); // Sets value to xhrRequest duration in seconds with statusCode 200\n  }\n});\n```\n\n##### Default Labels (segmented by registry)\n\nStatic labels may be applied to every metric emitted by a registry:\n\n```js\nconst client = require('prom-client');\nconst defaultLabels = { serviceName: 'api-v1' };\nclient.register.setDefaultLabels(defaultLabels);\n```\n\nThis will output metrics in the following way:\n\n```\n# HELP process_resident_memory_bytes Resident memory size in bytes.\n# TYPE process_resident_memory_bytes gauge\nprocess_resident_memory_bytes{serviceName=\"api-v1\"} 33853440 1498510040309\n```\n\nDefault labels will be overridden if there is a name conflict.\n\n`register.clear()` will clear default labels.\n\n#### Timestamps\n\nCounter and gauge metrics can take a timestamp argument after the value\nargument. This argument must be a Date or a number (milliseconds since Unix\nepoch, i.e. 1970-01-01 00:00:00 UTC, excluding leap seconds).\n\n```js\ngauge.set(100, 1485531442231); // Set gauge value and timestamp as milliseconds since Unix epoch\ngauge.set(100, Date.now()); // Set gauge value and timestamp as milliseconds since Unix epoch\ngauge.set(100, new Date()); // Set gauge value and timestamp as Date\ngauge.set({ method: 'GET', statusCode: '200' }, 100, new Date()); // Set gauge value and timestamp with labels\ngauge.labels('GET', '200').set(100, new Date()); // Same as above\n\ncounter.inc(1, new Date()); // Increment counter with timestamp\n```\n\n#### Multiple registries\n\nBy default, metrics are automatically registered to the global registry (located\nat `require('prom-client').register`). You can prevent this by setting last\nparameter when creating the metric to `false` (depending on metric, this might\nbe 4th or 5th parameter).\n\nUsing non-global registries requires creating Registry instance and adding it\ninside `registers` inside the configuration object. Alternatively you can pass\nan empty `registers` array and register it manually.\n\nRegistry has a `merge` function that enables you to expose multiple registries\non the same endpoint. If the same metric name exists in both registries, an\nerror will be thrown.\n\n```js\nconst client = require('prom-client');\nconst registry = new client.Registry();\nconst counter = new client.Counter({\n  name: 'metric_name',\n  help: 'metric_help',\n  registers: [registry]\n});\nconst histogram = new client.Histogram({\n  name: 'metric_name',\n  help: 'metric_help',\n  registers: []\n});\nregistry.registerMetric(histogram);\ncounter.inc();\n\nconst mergedRegistries = client.Registry.merge([registry, client.register]);\n```\n\nIf you want to use multiple or non-default registries with the Node.js `cluster`\nmodule, you will need to set the registry/registries to aggregate from:\n\n```js\nconst AggregatorRegistry = client.AggregatorRegistry;\nAggregatorRegistry.setRegistries(registry);\n// or for multiple registries:\nAggregatorRegistry.setRegistries([registry1, registry2]);\n```\n\n#### Register\n\nYou can get all metrics by running `register.metrics()`, which will output a\nstring for prometheus to consume.\n\n`register.metrics()` takes an optional object with a `timestamps` field. Setting\nthis to false will strip timestamps from the string.\n\n##### Getting a single metric for Prometheus displaying\n\nIf you need to output a single metric for Prometheus, you can use\n`register.getSingleMetricAsString(*name of metric*)`, it will output a string\nfor Prometheus to consume.\n\n##### Getting a single metric\n\nIf you need to get a reference to a previously registered metric, you can use\n`register.getSingleMetric(*name of metric*)`.\n\n##### Removing metrics\n\nYou can remove all metrics by calling `register.clear()`. You can also remove a\nsingle metric by calling `register.removeSingleMetric(*name of metric*)`.\n\n##### Resetting metrics\n\nIf you need to reset all metrics, you can use `register.resetMetrics()`. The\nmetrics will remain present in the register and can be used without the need to\ninstantiate them again, like you would need to do after `register.clear()`.\n\n##### Cluster metrics\n\nYou can get aggregated metrics for all workers in a node.js cluster with\n`register.clusterMetrics()`. This method both returns a promise and accepts a\ncallback, both of which resolve with a metrics string suitable for Prometheus to\nconsume.\n\n```js\nregister\n  .clusterMetrics()\n  .then(metrics => {\n    /* ... */\n  })\n  .catch(err => {\n    /* ... */\n  });\n\n// - or -\n\nregister.clusterMetrics((err, metrics) => {\n  // ...\n});\n```\n\n#### Pushgateway\n\nIt is possible to push metrics via a\n[Pushgateway](https://github.com/prometheus/pushgateway).\n\nNote that timestamps will be stripped before the metrics are pushed, since\npushgateway >= 0.4 does not accept timestamps.\n\n```js\nconst client = require('prom-client');\nlet gateway = new client.Pushgateway('http://127.0.0.1:9091');\n\ngateway.pushAdd({ jobName: 'test' }, function(err, resp, body) {}); //Add metric and overwrite old ones\ngateway.push({ jobName: 'test' }, function(err, resp, body) {}); //Overwrite all metrics (use PUT)\ngateway.delete({ jobName: 'test' }, function(err, resp, body) {}); //Delete all metrics for jobName\n\n//All gateway requests can have groupings on it\ngateway.pushAdd({ jobName: 'test', groupings: { key: 'value' } }, function(\n  err,\n  resp,\n  body\n) {});\n\n//It's possible to extend the Pushgateway with request options from nodes core http/https library\ngateway = new client.Pushgateway('http://127.0.0.1:9091', { timeout: 5000 }); //Set the request timeout to 5000ms\n```\n\n#### Utilites\n\nFor convenience, there are 2 bucket generator functions - linear and\nexponential.\n\n```js\nconst client = require('prom-client');\nnew client.Histogram({\n  name: 'metric_name',\n  help: 'metric_help',\n  buckets: client.linearBuckets(0, 10, 20) //Create 20 buckets, starting on 0 and a width of 10\n});\n\nnew client.Histogram({\n  name: 'metric_name',\n  help: 'metric_help',\n  buckets: client.exponentialBuckets(1, 2, 5) //Create 5 buckets, starting on 1 and with a factor of 2\n});\n```\n\nThe content-type prometheus expects is also exported as a constant, both on the\n`register` and from the main file of this project, called `contentType`.\n\n### Garbage Collection\n\nTo avoid dependencies in this module, GC stats are kept outside of it. If you\nwant GC stats, you can use https://github.com/SimenB/node-prometheus-gc-stats\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+ssh://git@github.com/siimon/prom-client.git"
  },
  "scripts": {
    "compile-typescript": "tsc index.d.ts --noImplicitAny",
    "lint": "eslint .",
    "precommit": "lint-staged",
    "test": "npm run lint && npm run compile-typescript && npm run test-unit",
    "test-unit": "jest"
  },
  "types": "./index.d.ts",
  "version": "10.2.3"
}
